<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计网强化 | 去他妈的生活</title><meta name="author" content="Chao"><meta name="copyright" content="Chao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="计网体系结构 计算机网络组成  组成上看：硬件+软件+协议 工作上看：边缘部分+核心部分 功能上看：通信子网+资源子网  城域网大都采用以太网技术 数据链路层的子层介质访问子层，即MAC子层：控制对共享信道的访问 局域网采用广播技术 广域网使用交换技术，基本都是点对点网络 是否采用存储转发和路由选择机制是点对点网络和广播式网络的重要区别 时延&#x3D;发送时延+传播时延+处理时延（一般忽略）+排队时延（">
<meta property="og:type" content="article">
<meta property="og:title" content="计网强化">
<meta property="og:url" content="http://chaoblog.site/2023/09/23/%E8%AE%A1%E7%BD%91%E5%BC%BA%E5%8C%96/index.html">
<meta property="og:site_name" content="去他妈的生活">
<meta property="og:description" content="计网体系结构 计算机网络组成  组成上看：硬件+软件+协议 工作上看：边缘部分+核心部分 功能上看：通信子网+资源子网  城域网大都采用以太网技术 数据链路层的子层介质访问子层，即MAC子层：控制对共享信道的访问 局域网采用广播技术 广域网使用交换技术，基本都是点对点网络 是否采用存储转发和路由选择机制是点对点网络和广播式网络的重要区别 时延&#x3D;发送时延+传播时延+处理时延（一般忽略）+排队时延（">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://chaoblog.site/img/banner/net.jpg">
<meta property="article:published_time" content="2023-09-23T12:03:33.000Z">
<meta property="article:modified_time" content="2024-01-18T16:07:22.748Z">
<meta property="article:author" content="Chao">
<meta property="article:tag" content="408">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://chaoblog.site/img/banner/net.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://chaoblog.site/2023/09/23/%E8%AE%A1%E7%BD%91%E5%BC%BA%E5%8C%96/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=4.12.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计网强化',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-19 00:07:22'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.0.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/banner/net.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="去他妈的生活"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg"/></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计网强化</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-09-23T12:03:33.000Z" title="发表于 2023-09-23 20:03:33">2023-09-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-18T16:07:22.748Z" title="更新于 2024-01-19 00:07:22">2024-01-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%80%83%E7%A0%94/">考研</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%80%83%E7%A0%94/%E4%B8%93%E4%B8%9A%E8%AF%BE/">专业课</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="计网体系结构"><a class="markdownIt-Anchor" href="#计网体系结构"></a> 计网体系结构</h2>
<p>计算机网络组成</p>
<ul>
<li>组成上看：硬件+软件+协议</li>
<li>工作上看：边缘部分+核心部分</li>
<li>功能上看：通信子网+资源子网</li>
</ul>
<p>城域网大都采用<code>以太网</code>技术</p>
<p>数据链路层的子层<code>介质访问子层</code>，即MAC子层：控制对共享信道的访问</p>
<p>局域网采用<code>广播技术</code><br />
广域网使用<code>交换技术</code>，基本都是点对点网络</p>
<p>是否采用存储转发和路由选择机制是点对点网络和广播式网络的重要区别</p>
<p>时延=发送时延+传播时延+处理时延（一般忽略）+排队时延（一般忽略）</p>
<p>协议数据单元<code>PDU</code>=服务数据单元<code>SDU</code>+协议控制信息<code>PCI</code></p>
<p>协议的组成</p>
<ul>
<li>语法：传输数据的格式</li>
<li>语义：要完成的功能</li>
<li>同步：条件、时序关系</li>
</ul>
<p>OSI模型</p>
<ul>
<li>应用层：用户与网络的界面</li>
<li>表示层：压缩、格式转换</li>
<li>会话层：建立同步，端到端服务</li>
<li>传输层：提供面向连接服务</li>
<li>网络层：支持无连接服务和面向连接服务</li>
<li>数据链路层：点对点服务</li>
</ul>
<p>OSI模型中，链路层、网络层、传输层都具有流量控制功能</p>
<ul>
<li>传输层：端到端的流量控制</li>
<li>网络层：整个网络的流量控制</li>
<li>链路层：相邻结点间的流量控制</li>
</ul>
<p>TCP/IP模型</p>
<ul>
<li>网际层提供无连接服务，不可靠服务</li>
<li>传输层提供无连接和面向连接服务</li>
</ul>
<p>端到端和点到点的区别</p>
<ul>
<li>物理层、数据链路层和网络层组成的通信子网提供点到点服务</li>
<li>传输层为主机提供端到端通信</li>
<li>端到端建立在点到点的基础上</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/p1.jpg" alt="" /></p>
<h2 id="物理层"><a class="markdownIt-Anchor" href="#物理层"></a> 物理层</h2>
<p>若一个码元携带n比特信息，则信息传输率=n<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">×</span></span></span></span>码元传输率</p>
<p>计算数据传输率</p>
<ul>
<li>奈氏定理
<ul>
<li>理想数据传输率=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>×</mo><mtext>信道带宽</mtext><mo>×</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mi>V</mi></mrow><annotation encoding="application/x-tex">2\times信道带宽\times\log_2V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">带</span><span class="mord cjk_fallback">宽</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.93858em;vertical-align:-0.24414em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></li>
</ul>
</li>
<li>香农定理
<ul>
<li>实际数据传输率=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>带宽</mtext><mo>×</mo><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>信噪比</mtext><mo>=</mo><mn>10</mn><msub><mo><mi>log</mi><mo>⁡</mo></mo><mn>10</mn></msub><mtext>（</mtext><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mtext>）</mtext></mrow><annotation encoding="application/x-tex">带宽\times\log_2(1+S/N),信噪比=10\log_{10}（S/N）</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">带</span><span class="mord cjk_fallback">宽</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">噪</span><span class="mord cjk_fallback">比</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.20696799999999996em;"><span style="top:-2.4558600000000004em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24414em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">（</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord cjk_fallback">）</span></span></span></span></li>
</ul>
</li>
<li>若奈氏准则和香农定理都有，则取最小值</li>
<li>采样频率<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>×</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">f\times V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></li>
</ul>
<p>以太网采用曼切斯特编码，码元为2b</p>
<p>数据编码</p>
<ul>
<li>曼彻斯特编码（两种规定都可以）
<ul>
<li>前半段高电平为1，低电平为0</li>
<li>前半段高电平为0，低电平为1</li>
</ul>
</li>
<li>差分曼彻斯特编码
<ul>
<li>变为0，不变为1</li>
</ul>
</li>
</ul>
<p>报文交换和分组交换</p>
<ul>
<li>都使用存储转发方式</li>
<li>分组交换在报文交换的基础上规定了大小上限，划分成多个数据块</li>
</ul>
<p>分组交换可划分为</p>
<ul>
<li>虚电路
<ul>
<li>面向连接</li>
<li>有序到达</li>
<li>维持虚电路表</li>
<li>分组首部不包含目的地址，而是虚电路标识符</li>
</ul>
</li>
<li>数据报
<ul>
<li>无连接</li>
</ul>
</li>
</ul>
<p>虚电路</p>
<ul>
<li>建立时需要进行路由选择</li>
<li>不需要为虚电路分配带宽</li>
</ul>
<p>光纤</p>
<ul>
<li>原理：光的全反射特性</li>
<li>分类：多模光纤（近距离）、单模光纤（远距离）</li>
</ul>
<p>物理层特性</p>
<ul>
<li>机械特性：规定形状、尺寸、引脚数目等</li>
<li>电气特性：规定电压范围</li>
<li>功能特性：规定电平的意义</li>
<li>过程特性：规定事件的出现顺序</li>
</ul>
<p>放大器和中继器</p>
<ul>
<li>都是放大功能</li>
<li>放大器放大模拟信号</li>
<li>中继器放大数字信号</li>
</ul>
<p>集线器Hub</p>
<ul>
<li>多端口中继器</li>
<li>总线网</li>
<li>只能半双工</li>
<li>处于冲突域</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/p2.jpg" alt="" /></p>
<h2 id="数据链路层"><a class="markdownIt-Anchor" href="#数据链路层"></a> 数据链路层</h2>
<p>CRC循环冗余码</p>
<ul>
<li>若发送的数据为1101011011</li>
<li>生成多项式为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><mi>x</mi><mo>+</mo><mn>1</mn><mo>=</mo><mn>10011</mn></mrow><annotation encoding="application/x-tex">x^4+x+1=10011</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span></span></span></span></li>
<li>求最终发送的数据
<ul>
<li>多项式的阶数为n，则先给数据添加n个0，即11010110110000</li>
<li>11010110110000异或10011的余数为1110</li>
<li>则最终发送的数据为11010110111110</li>
</ul>
</li>
<li>求给定的数据是否发生错误
<ul>
<li>将给定数据异或多项式，余数为0则未出错</li>
</ul>
</li>
</ul>
<p>广播地址不会发给自己，只会发给所有其他主机</p>
<p>TCP数据报文拆包流程</p>
<ul>
<li>TCP首部
<ul>
<li>前20B固定，后4N字节可选字段</li>
<li>首部最短20B</li>
<li>首部长度单位4B</li>
</ul>
</li>
<li>IP首部
<ul>
<li>前20B固定，后面为可选字段</li>
<li>首部最短20B</li>
</ul>
</li>
<li>以太网帧首部和尾部
<ul>
<li>帧首部：总共14B：目的MAC地址6B+源MAC地址6B+类型2B</li>
<li>帧尾部：总共4B的FCS校验码信息</li>
<li>以太网帧的数据长度为46B-1500B（长度&lt;46B时进行字符填充）</li>
<li>以太网帧长度为64B-1518B</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/chaibao.jpg" alt="" /></p>
<p>TCP头部信息<br />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/tcp.jpg" alt="" /></p>
<p>IP头部信息<br />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/ip.jpg" alt="" /></p>
<p>有连接则一定有确认，不存在无确认的无连接服务</p>
<p>以太网组帧时既要加首部，又要加尾部（而IP分组不需要加尾部）</p>
<ul>
<li>以太网帧收到网络层发来的IP数据报后，加入14B的头部和4B的尾部</li>
<li>头部：6B目的MAC地址+6B源MAC地址+2B类型</li>
<li>尾部：4B的FCS（校验码）</li>
<li>以太网帧添加的控制信息总共18B且是固定的（IP等数据报的头部长度可变）</li>
<li>以太网帧的数据（即IP数据报）的长度为46B-1500B</li>
<li>以太网帧的最小长度为64B，即数据46B+固定头部尾部18B=64B</li>
<li>以太网帧的最长长度为1518B，即数据1500B+固定头部尾部18B=1518B</li>
</ul>
<p>透明传输的作用：转义</p>
<p>流量控制的常见方式</p>
<ul>
<li>停止等待协议：发送窗口和接受窗口都为1，发送方每次接收到确认后发送下一帧</li>
<li>滑动窗口协议：发送方维持一组发送窗口，接受方维持一组接受窗口1
<ul>
<li>停止等待：发送窗口=1，接收窗口=1</li>
<li>后退N帧：发送窗口&gt;1，接收窗口=1</li>
<li>选择重传：发送窗口&gt;1，接收窗口&gt;1</li>
</ul>
</li>
</ul>
<p>可靠传输机制</p>
<ul>
<li>确认（捎带确认）</li>
<li>超时重传</li>
<li>自动重传请求ARQ：接收方请求发送方重传出错的帧</li>
</ul>
<p>若连续出现相同发送序号的数据帧，表明发送端进行了超时重传<br />
若连续出现相同序号的确认帧，明接收端收到了重复帧</p>
<h3 id="后退n帧协议gbn"><a class="markdownIt-Anchor" href="#后退n帧协议gbn"></a> 后退N帧协议GBN</h3>
<ul>
<li>发送方可连续发送</li>
<li>接收方只允许按顺序接受</li>
<li>累积确认</li>
<li>发生错误重传时，必须重传出错帧以及之后所有已正确传送的帧</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo></mrow><annotation encoding="application/x-tex">1&lt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span></span></span>发送窗口<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_T\leq2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>接收窗口<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_R=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>帧的编号为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>−</mo><mo>&gt;</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0-&gt;2^{n}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">0</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，帧的编号不影响，但发送窗口必须-1</li>
</ul>
<h3 id="滑动窗口与选择重传协议sr"><a class="markdownIt-Anchor" href="#滑动窗口与选择重传协议sr"></a> 滑动窗口与选择重传协议SR</h3>
<ul>
<li>接收窗口和发送窗口大小通常相同</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>发送窗口</mtext><msub><mi>W</mi><mi>T</mi></msub><mo>+</mo><mtext>接收窗口</mtext><msub><mi>W</mi><mi>R</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">发送窗口W_T+接收窗口W_R\leq2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">发</span><span class="mord cjk_fallback">送</span><span class="mord cjk_fallback">窗</span><span class="mord cjk_fallback">口</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">接</span><span class="mord cjk_fallback">收</span><span class="mord cjk_fallback">窗</span><span class="mord cjk_fallback">口</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>发送窗口</mtext><msub><mi>W</mi><mrow><mi>T</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mtext>接收窗口</mtext><msub><mi>W</mi><mrow><mi>R</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">发送窗口W_{Tmax}=接收窗口W_{Rmax}=2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">发</span><span class="mord cjk_fallback">送</span><span class="mord cjk_fallback">窗</span><span class="mord cjk_fallback">口</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">接</span><span class="mord cjk_fallback">收</span><span class="mord cjk_fallback">窗</span><span class="mord cjk_fallback">口</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>没有累积确认机制，接收方可不按序接收数据帧</li>
<li>接收方一旦怀疑帧出错，就发送一个否定帧NAK通知发送方重传该帧</li>
</ul>
<p>后退N帧协议GBN与选择重传协议SR对比</p>
<ul>
<li>发送窗口和接收窗口大小
<ul>
<li>GBN的发送窗口<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_T=2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，接收窗口<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_R=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>SR的发送窗口<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">W_T=2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>，接收窗口<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">W_R=2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
<li>接收方接收数据的机制
<ul>
<li>GBN有采用累积确认，只按序接收帧</li>
<li>SR不采用累积确认，不按序接收</li>
</ul>
</li>
<li>重传机制
<ul>
<li>GBN重传出错帧及之后所有已正确传送的帧</li>
<li>SR发送一个否定帧NAK，通知发送方只重传出错帧</li>
</ul>
</li>
</ul>
<p>介质访问控制MAC子层的功能是：协调同一信道的所有结点的信号，避免冲突</p>
<p>信道划分介质访问控制</p>
<ul>
<li>实质：把广播信道转变为点对点信道</li>
<li>频分多路复用FDM：共享时间，不共享空间</li>
<li>时分多路复用TDM：共享空间，不共享时间</li>
<li>波分多路复用WDM：共享时间，共享空间</li>
<li>码分多路复用CDM：共享时间，共享空间</li>
</ul>
<p>码分多址CDMA</p>
<ul>
<li>每个站的码片序列不同且必须正交</li>
<li>1=1，0=-1</li>
<li>判断发送的数据（假设站A的码片为<code>1,0,0,1/1,-1,-1,1</code>）
<ul>
<li>将收到的数据<code>1,0,0,1/1,-1,-1,-1,1</code>与自己相与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>1</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>+</mo><mn>1</mn></mrow><mn>4</mn></mfrac><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\frac{1+1+1+1}{4}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，则传送的数据为1</li>
<li>将收到的数据<code>0,1,1,0/-1,1,1,-1</code>与自己相与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mo>−</mo><mn>1</mn><mo>−</mo><mn>1</mn><mo>−</mo><mn>1</mn><mo>−</mo><mn>1</mn></mrow><mn>4</mn></mfrac><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\frac{-1-1-1-1}{4}=-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>，则传送的数据为0</li>
<li>将收到的数据<code>1,1,1,1/1,1,1,1</code>与自己相与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>1</mn><mo>−</mo><mn>1</mn><mo>−</mo><mn>1</mn><mo>+</mo><mn>1</mn></mrow><mn>4</mn></mfrac><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\frac{1-1-1+1}{4}=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，则发送站点未发送数据给A</li>
</ul>
</li>
</ul>
<p>静态划分信道——信道划分介质访问控制中不会发生冲突</p>
<h3 id="csma协议"><a class="markdownIt-Anchor" href="#csma协议"></a> CSMA协议</h3>
<ul>
<li>1-坚持：空闲发送，忙则监听</li>
<li>非坚持：空闲发送，忙则放弃，随机等待一个时间后监听</li>
<li>p-坚持：空闲以概率p发送，忙则监听</li>
</ul>
<h3 id="碰撞检测csmacd协议"><a class="markdownIt-Anchor" href="#碰撞检测csmacd协议"></a> 碰撞检测CSMA/CD协议</h3>
<ul>
<li>先听后发，边听边发，冲突停发，随机重发</li>
<li>适用于<code>总线型</code>以太网或<code>半双工</code>环境（全双工无冲突，因此不需要）</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>最小帧长</mtext><mo>=</mo><mtext>总线传播时延</mtext><mo>×</mo><mtext>数据传输速率</mtext><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">最小帧长=总线传播时延\times数据传输速率\times2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">最</span><span class="mord cjk_fallback">小</span><span class="mord cjk_fallback">帧</span><span class="mord cjk_fallback">长</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">总</span><span class="mord cjk_fallback">线</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">播</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">延</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">据</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">输</span><span class="mord cjk_fallback">速</span><span class="mord cjk_fallback">率</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></li>
<li>争用期<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>为以太网端到端往返时间，只有过来争用期还未检测到碰撞，则未发生碰撞</li>
<li>截断二进制退避算法
<ul>
<li>每次从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,1,...2^k-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>中随机选取一个数<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span>，则重传退避时间为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>r</mi><mi>τ</mi></mrow><annotation encoding="application/x-tex">2r\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>为重传次数，超过10次后不增大，一直等于10</li>
<li>当重传16次时放弃，抛弃该帧并报告错误</li>
</ul>
</li>
</ul>
<p>关于争用期和最短帧长</p>
<ul>
<li>争用期：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>表示端到端传播时延，即一方发送数据到达另一方的时间。在极限状态下，对方从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>τ</mi></mrow><annotation encoding="application/x-tex">t=\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>发送数据，则主机在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">t=2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>才能检测到碰撞消息。故主机在发送数据的过程中，边发送边检测，只要经过<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>时间还未检测到碰撞，则表明之前发的数据没有碰撞，并且此时主机独占总线，其他主机检测到总线忙，都不能发送数据，则主机之前及以后发送的数据都不会再发生碰撞，故争用期为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span></li>
<li>最短帧长：由于CSMA/CD采用边发送边监听的策略，发送完就不再监听，由上面可知，主机检测到碰撞的最晚时间为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>，为使得主机一定能检测到碰撞，必须在<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">t=2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>时还在发送数据检测碰撞，则最小帧长就是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi><mo>×</mo><mtext>数据发送速率</mtext></mrow><annotation encoding="application/x-tex">2\tau\times 数据发送速率</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">据</span><span class="mord cjk_fallback">发</span><span class="mord cjk_fallback">送</span><span class="mord cjk_fallback">速</span><span class="mord cjk_fallback">率</span></span></span></span>，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>时间内发送的数据总量，若帧长小于该最小帧长，可能导致发生碰撞而检测不到（以太网规定最短帧长为64B）</li>
</ul>
<p>传输速率</p>
<ul>
<li>10Base-T的传输速率为10Mb/s</li>
<li>100Base-T的传输速率为100Mb/s</li>
</ul>
<p>截断二进制退避算法：（争用期=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>）</p>
<ul>
<li>当重传次数k不超过10时，退避时间=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>×</mo><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">[0,1,...,2^k-1]\times 2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span></li>
<li>当重传次数k超过10时，退避时间=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msup><mn>2</mn><mn>10</mn></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>×</mo><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">[0,1,...,2^{10}-1]\times 2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>（k不再增加）</li>
<li>当重传次数k超过16时，抛弃该帧并向上层报告错误</li>
</ul>
<h3 id="碰撞避免csmaca协议"><a class="markdownIt-Anchor" href="#碰撞避免csmaca协议"></a> 碰撞避免CSMA/CA协议</h3>
<ul>
<li>适用于无线局域网
<ul>
<li>接受信号强度远远小于发送信号强度</li>
<li>隐蔽站问题：检测不到对方</li>
</ul>
</li>
<li>解决隐蔽站的方法：信道预约
<ul>
<li>发送方<code>广播</code>发送一个请求发送<code>RTS</code>控制帧</li>
<li>若空闲，则AP<code>广播</code>一个允许发送<code>CTS</code>控制帧</li>
<li><code>RTS</code>的功能：允许源站发送，通知其他站点在预约期内不要发送</li>
</ul>
</li>
<li>帧间间隔IFS的类型
<ul>
<li>SIFS：（最短）ACK帧、CTS帧、分片的数据帧</li>
<li>PIFS：（中等长度）在PCF操作中使用</li>
<li>DIFS：（最长）用于竞争访问时延</li>
</ul>
</li>
<li>发送第一个数据时要等待一个<code>DIFS</code>时间后发送</li>
<li>每次发送完一帧都必须等待一个帧间间隔IFS的时间</li>
<li>发送方发送完一帧要在收到对方确认帧后才发送下一帧</li>
</ul>
<h3 id="轮询访问令牌传递协议"><a class="markdownIt-Anchor" href="#轮询访问令牌传递协议"></a> 轮询访问令牌传递协议</h3>
<ul>
<li>适用于令牌环局域网，适合负载很高的广播信道</li>
<li>既不共享时间，也不共享空间</li>
<li>逻辑上环型总线，但物理拓扑不一定是环</li>
<li>各个站点的访问权是公平的</li>
<li>令牌是一个特殊的MAC控制帧</li>
<li>站点只有获得令牌后才能发送数据帧</li>
<li>传送完后重新产生一个令牌并传递给下一个站点</li>
</ul>
<p>以太网的逻辑拓扑是总线形，物理拓扑是星形或拓展星形</p>
<p><code>IEEE802</code>标准将数据链路层划分为两个子层</p>
<ul>
<li>逻辑链路控制<code>LLC</code>子层：与传输媒体无关，向网络层提供无确认无连接、面向连接、带确认无连接、高速传送4种连接服务</li>
<li>媒体介入控制<code>MAC</code>子层：组帧、拆卸帧、比特传输差错检测、透明传输</li>
</ul>
<p>以太网</p>
<ul>
<li>通常将802.3局域网成为以太网</li>
<li>提供无连接、不可靠服务</li>
<li>使用曼切斯特编码（码元为2）</li>
<li>规定的最小帧长是64B，数据帧的有效数据是1500B</li>
</ul>
<p>以太网的传输介质的适用情况如下<br />
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/chuanshujiezhi.jpg" alt="" /></p>
<p>网卡</p>
<ul>
<li>工作在数据链路层和物理层</li>
<li>网卡和局域网的通信通过电缆或双绞线以<code>串行</code>方式</li>
<li>网卡和计算机的通信是通过IO总线以<code>并行</code>方式</li>
<li>每块网卡有唯一的MAC地址，若相同的MAC地址则都不能通信</li>
</ul>
<p>以太网的MAC帧</p>
<ul>
<li>不需要帧结束符（因为各帧之间有一定的界隙）</li>
<li>最短帧长64B</li>
<li>数据段长度<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>46</mn><mi>B</mi><mo separator="true">,</mo><mn>1500</mn><mi>B</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[46B,1500B]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">4</span><span class="mord">6</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">5</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose">]</span></span></span></span>，数据较少时填充</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/maczhen.jpg" alt="" /></p>
<p>高速以太网</p>
<ul>
<li><code>100BASET</code>以太网
<ul>
<li>传输速率：<code>100Mb/s</code></li>
<li>双绞线</li>
<li>基带信号的星行拓扑</li>
<li>使用<code>CSMA/CD</code>协议</li>
<li>支持全双工（这种情况下不使用CSMA/CD）、半双工</li>
</ul>
</li>
<li>吉比特以太网
<ul>
<li>传输速率：<code>1Gb/s</code></li>
<li>支持全双工（这种情况下不使用CSMA/CD）、半双工</li>
</ul>
</li>
<li>10吉比特以太网
<ul>
<li>只使用光纤作为传输媒体</li>
<li>只工作在全双工，不使用CSMA/CD</li>
</ul>
</li>
</ul>
<p>802.11帧的地址字段最常用的两种情况</p>
<ul>
<li>去往AP=1，来自AP=0：站点A要向B发送数据帧，先向接入点AP发送数据帧</li>
<li>去往AP=0，来自AP=1：接入点AP转发给目的站点B</li>
</ul>
<table>
<thead>
<tr>
<th>去往AP</th>
<th>来自AP</th>
<th>地址1</th>
<th>地址2</th>
<th>地址3</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0</td>
<td>接收地址=AP地址</td>
<td>发送地址=源地址</td>
<td>目的地址</td>
<td></td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>接收地址=目的地址</td>
<td>发送地址=AP地址</td>
<td>源地址</td>
<td></td>
</tr>
</tbody>
</table>
<p>虚拟局域网VLAN</p>
<ul>
<li>将一个较大的局域网划分成较小的逻辑上的VLAN</li>
<li>每个VLAN是一个较小的广播域（分割了广播域）</li>
<li>在以太网帧中插入4B的标识符（VLAN标签）</li>
</ul>
<p>广域网和局域网的区别</p>
<ul>
<li>广域网
<ul>
<li>范围广</li>
<li>连接方式：结点之间是点到点连接</li>
<li>OSI参考模型：物理层、数据链路层、网络层</li>
<li>强度资源共享</li>
<li>重要问题：路由选择和分组转发</li>
</ul>
</li>
<li>局域网
<ul>
<li>范围小</li>
<li>连接方式：普遍采用多点接入技术</li>
<li>OSI参考模型：物理层、数据链路层</li>
<li>强度数据传输</li>
</ul>
</li>
</ul>
<h3 id="点对点ppp协议"><a class="markdownIt-Anchor" href="#点对点ppp协议"></a> 点对点PPP协议</h3>
<ul>
<li>是目前使用最广泛的点对点数据链路层协议</li>
<li>使用串行线路通信，面向字节（字符填充），不可靠</li>
<li>组成部分
<ul>
<li>链路控制协议LCP</li>
<li>网络控制协议NCP</li>
<li>将IP数据报封装到串行链路的方法</li>
</ul>
</li>
<li>特点
<ul>
<li>提供差错控制但不提供纠错功能</li>
<li>只支持全双工</li>
<li>只支持点对点的链路通信，不支持多点线路</li>
<li>两端可以允许不同的网络层协议</li>
</ul>
</li>
</ul>
<p>交换机</p>
<ul>
<li>实质是多端口网桥</li>
<li>通常工作在全双工方式</li>
<li>可以实现VLAN（VLAN可以隔离冲突域和广播域）</li>
<li>两种交换方式
<ul>
<li>直通式交换机：速度快，不可靠，不支持不同速率端口</li>
<li>存储转发式交换机：可靠性高，支持不同速率端口转换</li>
</ul>
</li>
<li>转发过程
<ul>
<li>若在交换表中能找到目的MAC地址，则转发到对应端口</li>
<li>若找不到
<ul>
<li>先将帧的源地址写入交换表</li>
<li>向除源主机外广播该帧</li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>设备名称</th>
<th>能否隔离冲突域</th>
<th>能否隔离广播域</th>
</tr>
</thead>
<tbody>
<tr>
<td>集线器</td>
<td>不能</td>
<td>不能</td>
</tr>
<tr>
<td>中继器</td>
<td>不能</td>
<td>不能</td>
</tr>
<tr>
<td>交换机</td>
<td>能</td>
<td>不能</td>
</tr>
<tr>
<td>网桥</td>
<td>能</td>
<td>不能</td>
</tr>
<tr>
<td>路由器</td>
<td>能</td>
<td>能</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/p3.jpg" alt="" /></p>
<h2 id="网络层"><a class="markdownIt-Anchor" href="#网络层"></a> 网络层</h2>
<p>MAC地址和IP地址</p>
<ul>
<li>IP地址只有可能被NAT改变（私有地址转换为共有地址），否则永远表示初始发送的源地址和最终目的地址</li>
<li>MAC地址在传输过程中会随着所处不同局域网而改变（MAC源地址和目的地址永远表示当前正在转发的双方地址，而不是初始发送和最终目的地址）</li>
</ul>
<p>路由表</p>
<ul>
<li>到互联网的路由是默认路由，地址为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.0.0.0</mn><mi mathvariant="normal">/</mi><mn>0</mn></mrow><annotation encoding="application/x-tex">0.0.0.0/0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">.</span><span class="mord">0</span><span class="mord">/</span><span class="mord">0</span></span></span></span></li>
<li>到特定主机的子网掩码为255.255.255.255</li>
</ul>
<p>离主机最近的路由器即为默认网关</p>
<p>默认网关和主机的子网掩码相同</p>
<p>中继系统</p>
<ul>
<li>物理层中继系统：转发器、集线器</li>
<li>数据链路层中继系统：网桥、交换机</li>
<li>网络层中继系统：路由器</li>
<li>网路层以上中继系统：网关</li>
</ul>
<p>SDN</p>
<ul>
<li>数据平面（转发平面）
<ul>
<li>功能：转发</li>
</ul>
</li>
<li>控制平面
<ul>
<li>功能：路由选择</li>
</ul>
</li>
<li>接口
<ul>
<li>北向接口：向上提供服务</li>
<li>南向接口：SDN控制器和转发设备建立双向会话的接口</li>
<li>东西向接口：SDN控制器集群内部控制器之间的通信接口，用于增强整个控制平面的可靠性和可扩展性</li>
</ul>
</li>
</ul>
<p>拥塞控制和流量控制的区别</p>
<ul>
<li>拥塞控制是一个全局性的问题，涉及网络中所有主机和路由器</li>
</ul>
<p>慢收敛是导致路由回路的根本原因</p>
<p>IP数据报格式</p>
<ul>
<li>首部长度：表示IP数据报首部的长度，20代表没有可选字段，单位是4B</li>
<li>总长度：是首部和数据部分之和的长度，单位是1B（MTU就是指总长度的最大值）</li>
<li>片偏移：IP数据分片距离最开始的长度（即此分片之前的所有分片的数据部分之和），单位为8B（除最后一个分片外，每个分片时必须满足分片的数据部分的长度为8B的整数倍）</li>
<li>生存时间TTL：每经过一个路由器-1，TTL减为0时路由器丢弃该分组</li>
<li>首部校验和：只校验IP数据报首部信息，每经过一个路由器，首部校验和都要重新计算</li>
</ul>
<p>标志字段</p>
<ul>
<li>DF=1表示允许分片</li>
<li>MF=0表示最后一个分片</li>
</ul>
<p>关于TTL字段</p>
<ul>
<li>TTL表示的是最多可经过多少个路由器</li>
<li>TTL字段只有在经过路由器时才会减一，经过主机不会减一</li>
<li>路由器收到IP分组，先判断TTL是否为0，为0则丢弃，然后减一，转发</li>
<li>例如：H1向H2发送一个IP分组，初始TTL=2，到第一个路由器时，TTL=2，路由器将TTL-1并转发；到第二个路由器时，TTL=1，路由器将TTL-1并转发；H2收到IP分组，此时TTL=0</li>
</ul>
<p>关于分片以及MTU</p>
<ul>
<li>MTU表示的是帧的数据部分的最大长度，即IP数据报的最大长度：IP头部+IP数据部分</li>
<li>片偏移必须满足8B的整数倍</li>
<li>分片时，不仅要满足IP数据报文总长度&lt;MTU，还要满足IP数据报的数据部分为8B的整数倍</li>
<li>最后一个分组的数据部分长度可以不满足8B的整数倍</li>
<li>求片偏移字段的值：前面分片的数据部分之和/8B</li>
</ul>
<p>4类IP地址</p>
<ul>
<li>A类（1-126/0）</li>
<li>B类（128-191/10）</li>
<li>C类（192-223/110）</li>
<li>D类（224-239/1110）：多播地址</li>
<li>E类（240-255/1111）：保留为今后使用</li>
</ul>
<p>IP数据报每经过一个路由器都要重新计算首部检验和</p>
<p>特殊IP</p>
<table>
<thead>
<tr>
<th>网络号</th>
<th>主机号</th>
<th>作为源地址</th>
<th>作为目的地址</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>全0</td>
<td>全0</td>
<td>可以</td>
<td>不可以</td>
<td>本网络上的本主机（DHCP协议）</td>
</tr>
<tr>
<td>全0</td>
<td></td>
<td>可以</td>
<td>不可以</td>
<td>本网络上的某台主机</td>
</tr>
<tr>
<td>全1</td>
<td>全1</td>
<td>不可以</td>
<td>可以</td>
<td>只在本网络上广播（路由器不转发）</td>
</tr>
<tr>
<td></td>
<td>全1</td>
<td>不可以</td>
<td>可以</td>
<td>对给定网络号上所有主机广播</td>
</tr>
<tr>
<td>127</td>
<td>非全0/全1</td>
<td>可以</td>
<td>可以</td>
<td>本地软件环回测试</td>
</tr>
</tbody>
</table>
<p>路由器必然至少具有两个IP地址（每个端口至少分配一个IP地址）</p>
<p>IP分片的数据部分必须为8B的整数倍</p>
<p>使用IP的协议</p>
<ul>
<li>ICMP</li>
<li>IGMP</li>
<li>TCP</li>
<li>UDP</li>
<li>OSPF</li>
</ul>
<h3 id="网络地址转化nat协议"><a class="markdownIt-Anchor" href="#网络地址转化nat协议"></a> 网络地址转化NAT协议</h3>
<ul>
<li>功能：将专用网络地址转换为公用地址</li>
<li>NAT转换表：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mtext>本地</mtext><mi>I</mi><mi>P</mi><mtext>地址</mtext><mo>:</mo><mtext>端口</mtext></mrow><mo>−</mo><mo>&gt;</mo><mrow><mtext>全球</mtext><mi>I</mi><mi>P</mi><mtext>地址</mtext><mo>:</mo><mtext>端口</mtext></mrow></mrow><annotation encoding="application/x-tex">{本地IP地址:端口}-&gt;{全球IP地址:端口}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord cjk_fallback">本</span><span class="mord cjk_fallback">地</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord cjk_fallback">地</span><span class="mord cjk_fallback">址</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord cjk_fallback">端</span><span class="mord cjk_fallback">口</span></span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord cjk_fallback">全</span><span class="mord cjk_fallback">球</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord cjk_fallback">地</span><span class="mord cjk_fallback">址</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord cjk_fallback">端</span><span class="mord cjk_fallback">口</span></span></span></span></span></li>
<li>普通路由器转发IP数据报时不改变源IP地址和目的IP地址</li>
<li>转发IP数据报时，改变IP地址</li>
<li>工作在传输层（可以看见端口）</li>
</ul>
<p>无分类编制CIDR</p>
<ul>
<li>是变长子网掩码</li>
<li>使用二叉树解法（用结点堵水）</li>
<li>成为路由聚合或构成超网</li>
<li>最长前缀匹配</li>
</ul>
<h3 id="地址解析协议arp"><a class="markdownIt-Anchor" href="#地址解析协议arp"></a> 地址解析协议ARP</h3>
<ul>
<li>功能：将IP地址解析为MAC地址</li>
<li>工作原理（假设A向B发数据报）
<ul>
<li>若ARP缓存中有B的IP地址，直接写入B的MAC地址并转发</li>
<li>若ARP缓存中没有B的IP地址
<ul>
<li>写入MAC地址为全F的帧并广播ARP请求分组（广播发送）</li>
<li>B收到后向A发出ARP响应分组（单播发送）</li>
<li>A收到ARP响应分组后写入APR缓存再转发</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="网络控制报文协议icmp"><a class="markdownIt-Anchor" href="#网络控制报文协议icmp"></a> 网络控制报文协议ICMP</h3>
<ul>
<li>功能：更有效的转发IP数据报和提高交付成功率</li>
<li>工作在网络层</li>
<li>ICMP报文被封装在IP数据报中发送</li>
<li>分类
<ul>
<li>差错报告报文
<ul>
<li>终点不可达：路由器或主机不能交付数据报</li>
<li>原点抑制：路由器或主机由于拥塞而丢弃数据报，发送原点抑制使发送速率减慢</li>
<li>时间超过：路由器收到生存时间TTL=0的数据报</li>
<li>参数问题：数据包首部字段不正确</li>
<li>改变路由（重定向）：路由器让主机知道下次发送给另外的路由器</li>
</ul>
</li>
<li>询问报文
<ul>
<li>回送请求和回答</li>
<li>时间戳请求和回答</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>PING工作在应用层，只使用了ICMP的询问报文</p>
<p>不发送ICMP差错控制报文的情况</p>
<ul>
<li>对ICMP差错报告报文不再发送ICMP差错报告报文</li>
<li>对第一个分片的数据报片的后续数据报片都不发送</li>
<li>对有组播地址的数据报不发送</li>
<li>对特殊地址（<a target="_blank" rel="noopener" href="http://127.xxx/0.0.0.0%EF%BC%89%E4%B8%8D%E5%8F%91%E9%80%81">127.xxx/0.0.0.0）不发送</a></li>
</ul>
<h3 id="路由信息协议rip"><a class="markdownIt-Anchor" href="#路由信息协议rip"></a> 路由信息协议RIP</h3>
<ul>
<li>是应用层协议</li>
<li>使用UDP传送数据</li>
<li>分布式基于距离向量的路由选择协议（以跳数作为距离）</li>
<li>每个路由器维护从自身到其他每个目的路由器的距离记录，只和相邻路由器交换信息</li>
<li>一条路径最多只能包含15个路由器（15条），16表示不可达</li>
<li>只适用于小型互联网</li>
<li>可能会出现路由环路，坏消息传播的慢</li>
</ul>
<h3 id="开放最短路径优先协议ospf"><a class="markdownIt-Anchor" href="#开放最短路径优先协议ospf"></a> 开放最短路径优先协议OSPF</h3>
<ul>
<li>是网络层协议</li>
<li>用IP数据报发送</li>
<li>分布式链路状态路由算法</li>
<li>洪泛法：向所有路由器发送信息</li>
<li>使用Dijkstra算法计算最短路径</li>
<li>当链路状态发生变化时，更新链路</li>
<li>适用于大型网络</li>
<li>分组类型
<ul>
<li>问候分组</li>
<li>数据库描述分组</li>
<li>链路状态请求分组</li>
<li>链路状态更新分组</li>
<li>链路状态确认分组</li>
</ul>
</li>
</ul>
<h3 id="边界网关协议bgp"><a class="markdownIt-Anchor" href="#边界网关协议bgp"></a> 边界网关协议BGP</h3>
<ul>
<li>是应用层协议</li>
<li>外部网关协议</li>
<li>力求寻址一条能到达目的网络且较好的路由</li>
<li>4种报文
<ul>
<li>打开报文open</li>
<li>更新报文Update</li>
<li>保活报文Keepalive</li>
<li>通知报文Notification</li>
</ul>
</li>
</ul>
<p>三种路由协议的比较</p>
<table>
<thead>
<tr>
<th>协议</th>
<th>RIP</th>
<th>OSPF</th>
<th>BGP</th>
</tr>
</thead>
<tbody>
<tr>
<td>类型</td>
<td>内部</td>
<td>内部</td>
<td>外部</td>
</tr>
<tr>
<td>路由算法</td>
<td>距离向量</td>
<td>链路状态</td>
<td>路径向量</td>
</tr>
<tr>
<td>传递协议</td>
<td>UDP</td>
<td>IP</td>
<td>TCP</td>
</tr>
<tr>
<td>路径选择</td>
<td>跳数最少</td>
<td>代价最低</td>
<td>较好，非最佳</td>
</tr>
<tr>
<td>交换结点</td>
<td>相邻的路由器</td>
<td>网络中所有路由器</td>
<td>相邻的路由器</td>
</tr>
<tr>
<td>交换内容</td>
<td>本路由器的全部信息，即自己的路由表</td>
<td>与本路由器相邻的所有路由器的链路状态</td>
<td>首次为整个路由表；非首次为变化的部分</td>
</tr>
</tbody>
</table>
<p>IP组播</p>
<ul>
<li>仅应用于UDP</li>
<li>使用D类地址</li>
<li>组播只能用于目的地址，不能做源地址</li>
<li>提供不可靠服务</li>
<li>对组播数据报不会产生ICMP差错报文</li>
</ul>
<h3 id="因特网组管理协议igmp"><a class="markdownIt-Anchor" href="#因特网组管理协议igmp"></a> 因特网组管理协议IGMP</h3>
<ul>
<li>是组播路由协议</li>
<li>IGMP让连接到本地局域网的组播路由器知道本局域网上是否有主机参加或退出某个组播组</li>
<li>工作原理
<ul>
<li>主机A请求加入新的组播组，向组播组的组播地址发送一个IGMP报文，表示自己要加入</li>
<li>本地组播路由器收到IGMP报文后，将组成员关系转发给因特网上其他组播路由器</li>
<li>本地组播路由器周期性试探组成员，如果没有一个主机响应，则不在将该组关系转发给其他组播路由器</li>
</ul>
</li>
</ul>
<p>冲突域和广播域</p>
<ul>
<li>冲突域：连接到同一物理介质的所有结点的集合，存在介质争用</li>
<li>使用路由器分割的网络</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/p4.jpg" alt="" /></p>
<h2 id="传输层"><a class="markdownIt-Anchor" href="#传输层"></a> 传输层</h2>
<p>端口号</p>
<ul>
<li>熟知端口号（0-1023）
<ul>
<li>FTP     21</li>
<li>TELNET  23</li>
<li>SMTP    25</li>
<li>DNS     53</li>
<li>TFTP    69</li>
<li>HTTP    80</li>
<li>SNMP    161</li>
</ul>
</li>
<li>登记端口号（1024-49151）</li>
<li>短暂端口号（49152-65535）</li>
</ul>
<p>首部字段</p>
<ul>
<li>TCP   20B-60B</li>
<li>IP    20B</li>
<li>UDP   8B</li>
</ul>
<p>UDP中伪首部</p>
<ul>
<li>是计算校验时临时添加的，不计入UDP长度</li>
<li>既不向下传送也不向上递交，只在本地计算用</li>
<li>如果校验和计算结果为0，则在校验和字段置1</li>
</ul>
<p>UDP实现分用，依据的头部字段是目的端口号</p>
<p>IP中协议字段</p>
<ul>
<li>6是TCP</li>
<li>17是UDP</li>
</ul>
<p>TCP报文段格式</p>
<ul>
<li>序号：本报文短的第一个字节的序号</li>
<li>确认号：期望收到下一个报文段的第一个字节的序号</li>
</ul>
<p>UDP在IP的基础上增加了分用复用和差错检测功能</p>
<h3 id="udp协议"><a class="markdownIt-Anchor" href="#udp协议"></a> UDP协议</h3>
<ul>
<li>无连接、不可靠服务</li>
<li>在传输层</li>
<li>分组头部开销小，长度为8B</li>
<li>面向应用报文</li>
<li>常用于多媒体应用</li>
<li>支持单播、多播和广播</li>
<li>首部8B
<ul>
<li>源端口号</li>
<li>目的端口号</li>
<li>UDP总长度</li>
<li>校验和</li>
</ul>
</li>
<li>数据传输的可靠性由上层应用层复杂</li>
</ul>
<h3 id="tcp协议"><a class="markdownIt-Anchor" href="#tcp协议"></a> TCP协议</h3>
<ul>
<li>面向连接</li>
<li>在传输层</li>
<li>提供全双工通信</li>
<li>面向字节流</li>
<li>仅支持单播</li>
<li>首部最小长度20B，最大长度60B
<ul>
<li>源端口</li>
<li>目的端口</li>
<li>序号</li>
<li>确认号</li>
</ul>
</li>
</ul>
<p>TCP建立连接三次握手（SYN是同步位）</p>
<ul>
<li>TCP连接请求：不携带数据，消耗一个序号</li>
<li>TCP连接请求的确认：不携带数据，消耗一个序号</li>
<li>TCP连接请求的确认的确认：可以携带数据，携带数据则消耗序号，不携带数据则不消耗序号</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/sanci.jpg" alt="" /></p>
<p>TCP释放连接四次握手</p>
<ul>
<li>客户连接释放：可以携带数据，不携带数据也消耗一个序号，序号u=已传送的最后一个字节的序号+1，此后客户不能再发送数据</li>
<li>客户连接释放的确认：可以携带数据，不携带数据也消耗一个序号，序号v=已传送的最后一个字节的序号+1，此后服务器可发送数据</li>
<li>服务器连接释放：可以携带数据，不携带数据也消耗一个序号，重复上次的确认号</li>
<li>服务器连接释放的确认：发送完后客户等待2MSL进入关闭状态</li>
<li>释放连接的最短时间：服务端没有数据传送，则第二次挥手和第三次挥手同时发送（转为三次挥手），释放连接的时间为1.5RTT（其中MSL为最长报文段寿命）</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/siciwoshou.jpg" alt="" /></p>
<p>发送方序号seq和接受方序号ack_seq</p>
<ul>
<li>序号是数据载荷的第一个字节的序号</li>
<li>ack是希望收到下一个数据载荷的第一个字节的序号</li>
</ul>
<p>TCP的重传机制</p>
<ul>
<li>确认：TCP默认使用累积确认</li>
<li>重传
<ul>
<li>超时重传：发送方发完设置一个计时器，超时未收到确认则重传</li>
<li>冗余确认重传：当收到对同一报文的3个冗余确认时重传</li>
</ul>
</li>
</ul>
<p>发送窗口=min(拥塞窗口，接收窗口)</p>
<p>接收窗口rwnd，拥塞窗口cwnd，慢开始门限ssthresh<br />
TCP的拥塞控制：慢开始和拥塞处理</p>
<ul>
<li>慢开始
<ul>
<li>初始时令cwnd=1</li>
<li>cwnd指数增大，每收到一个确认cwnd加倍</li>
</ul>
</li>
<li>拥塞避免
<ul>
<li>cwnd线性增加，每收到一个确认cwnd+1</li>
</ul>
</li>
<li>网络拥塞处理
<ul>
<li>cwnd&lt;ssthresh时，使用慢开始</li>
<li>cwnd&gt;ssthresh时，使用拥塞避免</li>
<li>cwnd=ssthresh时，两者都可以使用，通常使用拥塞避免</li>
<li>出现拥塞时，将ssthresh设置为出现拥塞时的发送方的cwnd的一半，并重新执行慢开始算法</li>
<li>注意点：在慢开始阶段cwnd不能越过ssthresh，例如此时cwnd=8，ssthresh=10，则下一个RTT时cwnd=10而不是16</li>
</ul>
</li>
</ul>
<p>快重传和快恢复是对慢开始和拥塞避免的改进</p>
<ul>
<li>快重传
<ul>
<li>发送方收到3个冗余确认时，立马重传该报文，而不必等到该报文的计时器超时</li>
<li>冗余确认即重复确认，第一次收对某个数据报的确认请求不计数，直到第二次又对该数据请求时才为重复确认，记为第一次</li>
</ul>
</li>
<li>快恢复
<ul>
<li>发送方收到3个重复确认，将慢开始门限值和拥塞窗口值调整为cwnd的一半，然后使用拥塞避免</li>
</ul>
</li>
</ul>
<p>慢开始</p>
<ul>
<li>未发送拥塞时
<ul>
<li>拥塞窗口指数增加，但在每个期间内拥塞窗口线性增加，每经过一个RTT拥塞窗口加倍</li>
<li>例如：当此时拥塞窗口为8，发送第一个报文，收到确认后拥塞窗口+1变成9，然后继续发送第二个报文，收到确认后拥塞窗口变为10…直到发完8个后拥塞窗口变为16</li>
<li>每个期间占一个RTT：如拥塞窗口为8时，发完整个8个报文+收到所有确认报文占一个RTT</li>
</ul>
</li>
<li>当发送拥塞时
<ul>
<li>拥塞窗口线性增加</li>
<li>例如：拥塞窗口为16时发送拥塞，则在这个RTT内发送完整个16个报文，收到所有确认后，拥塞窗口不在倍增，而是+1，即下一个RTT拥塞窗口为17</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/p5.jpg" alt="" /></p>
<h2 id="应用层"><a class="markdownIt-Anchor" href="#应用层"></a> 应用层</h2>
<p>C/S模型</p>
<ul>
<li>客户直接不能直接通信</li>
<li>各计算机地位不平等</li>
<li>可扩展性不好</li>
</ul>
<p>P2P模型</p>
<ul>
<li>任意计算机之间可直接相互通信</li>
<li>特出特点：可扩展性好</li>
<li>是一种动态的逻辑结构，不是物理结构</li>
</ul>
<h3 id="动态主机配置协议dhcp"><a class="markdownIt-Anchor" href="#动态主机配置协议dhcp"></a> 动态主机配置协议DHCP</h3>
<ul>
<li>功能：给主机动态分配IP地址</li>
<li>是TCP/IP体系中应用层的协议</li>
<li>使用传输层UDP提供服务（在运输层封装成UDP用户数据报）</li>
<li>DHCP发现客户/服务器模式</li>
<li>DHCP服务器使用的UDP端口是67，DHCP客户使用的UDP端口是68</li>
<li>工作原理（四次握手）
<ul>
<li>需要IP地址的主机A广播<code>发现报文</code>（源地址0.0.0.0，目的地址255.255.255.255）以找到DHCP服务器</li>
<li>DHCP收到A的<code>发现报文</code>后，广播<code>提供报文</code>（源地址为DHCP服务器地址，目的地址255.255.255.255），使用ARP确保所选IP地址未被占用</li>
<li>A收到提供报文后，从多个DHCP服务器中选择一个接受该IP地址，则广播<code>请求报文</code>（源地址0.0.0.0，目的地址255.255.255.255）</li>
<li>DHCP服务器收到<code>请求报文</code>后广播<code>确认报文</code>（源地址为DHCP服务器地址，目的地址255.255.255.255），将该IP分配给A</li>
</ul>
</li>
<li>DHCP发现报文包含事务ID、DHCP客户MAC地址</li>
<li>DHCP提供报文包含事务ID、配置信息</li>
<li>DHCP报文包含事务ID、DHCP客户MAC地址、接受的租约中的IP地址、提供此租约的DHCP服务器的IP地址</li>
</ul>
<h3 id="域名系统dns"><a class="markdownIt-Anchor" href="#域名系统dns"></a> 域名系统DNS</h3>
<ul>
<li>采用客户/服务器模型</li>
<li>运行在UDP上</li>
<li>默认端口为53</li>
<li>因特网采用层次树状结构的域名系统</li>
<li>域名级别从左到右提高</li>
<li>DNS系统使用分布式结构</li>
<li>域名服务器分类
<ul>
<li>根域名服务器</li>
<li>顶级域名服务器</li>
<li>权限/授权域名服务器：将管辖的主机名转换为该主机的IP地址</li>
<li>本地域名服务器</li>
</ul>
</li>
<li>查找顺序
<ul>
<li>本地域名服务器的高速缓冲查找</li>
<li>本地DNS服务器去顶级域名服务器中找</li>
</ul>
</li>
<li>域名解析过程
<ul>
<li>递归查询：一路过去，再一路回来</li>
<li>迭代查询：每个服务器都告诉地域名服务器下一个服务器的地址，本地域名服务器再去查询该地址，爪形</li>
<li>混合查询：主机-&gt;本地域名服务器使用递归查询，本地域名服务器到其他服务器使用迭代查询</li>
</ul>
</li>
<li>查询过程
<ul>
<li>主机向本地域名服务器发出递归查询</li>
<li>本地域名服务器现在自己的高速缓冲中查询</li>
<li>若高速缓冲中没有对应映射，则本地域名服务器向域名服务器发出迭代查询</li>
</ul>
</li>
<li>访问www.abc.xyz.com的迭代查询过程
<ul>
<li>本地域名服务器最少DNS查询为0次，在本地高速缓冲中找到</li>
<li>本地域名服务器最少DNS查询为4次
<ul>
<li>查询根域名服务器</li>
<li><a target="_blank" rel="noopener" href="http://xn--zfrx6az5c1zbgx2b7ebhz9gfew99y.com">查询顶级域名服务器.com</a></li>
<li><a target="_blank" rel="noopener" href="http://xn--xyz-4w2e18doxf64cjy2c2nah6csz9rqf0a.com">查询权限域名服务器xyz.com</a></li>
<li><a target="_blank" rel="noopener" href="http://xn--abc-4w2e18doxf64cjy2c2nah6csz9rqf0a.xyz.com">查询权限域名服务器abc.xyz.com</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="文件传输协议ftp"><a class="markdownIt-Anchor" href="#文件传输协议ftp"></a> 文件传输协议FTP</h3>
<ul>
<li>在应用层</li>
<li>采用客户/服务器模式</li>
<li>使用TCP可靠传输</li>
<li>允许客户指明文件格式和类型</li>
<li>默认端口（注意区分是用户端口还是服务器端口）
<ul>
<li>数据连接的服务器默认端口20
<ul>
<li>主动模式下使用20端口</li>
<li>被动模式下，服务器和客户自行决定数据连接端口</li>
</ul>
</li>
<li>控制连接的服务器默认端口21</li>
<li>服务器端使用上述端口，而用户端的端口是自行分配的</li>
</ul>
</li>
<li>两个模式
<ul>
<li>主动模式：建立数据通道时，服务器通过服务器端口20连接到客户端的端口</li>
<li>被动模式：建立数据通道时，客户端连接到服务器随机开放的服务器端口</li>
</ul>
</li>
<li>两个并行TCP连接（先建立控制连接，再建立数据连接）
<ul>
<li>TCP控制连接
<ul>
<li>用于传送控制命令</li>
<li>整个会话期间一直保持打开状态</li>
</ul>
</li>
<li>TCP数据连接
<ul>
<li>用于传送数据</li>
<li>建立数据通道时，FTP服务器主动连接FTP客户</li>
<li>文件传输时才建立，传输结束关闭</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="简单邮件传输协议smtp"><a class="markdownIt-Anchor" href="#简单邮件传输协议smtp"></a> 简单邮件传输协议SMTP</h3>
<ul>
<li>提供可靠的电子邮件传输协议</li>
<li>基于TCP</li>
<li>使用客户/服务器模式</li>
<li>默认端口25</li>
<li>只能传送ASCII码字符文本数据，不能传送执行文件或其他二进制对象</li>
<li>多用途因特网邮件扩展MIME解决了SMTP只能传送ASCII码文本的问题</li>
<li>工作范围
<ul>
<li>用户代理向邮件服务器发送邮件</li>
<li>邮件服务器之间发送邮件</li>
</ul>
</li>
</ul>
<h3 id="邮局协议pop3"><a class="markdownIt-Anchor" href="#邮局协议pop3"></a> 邮局协议POP3</h3>
<ul>
<li>用户从目的邮件服务器读取邮件</li>
<li>基于TCP</li>
<li>客户/服务器模式</li>
<li>在传输层使用TCP</li>
<li>默认端口110</li>
<li>用户只能以下载并删除方式/下载并保留方式，不允许用户在邮件服务器上管理自己的邮件</li>
<li>因特网邮件访问协议IMAP：是POP的第四个版本，用户能在邮件服务器上管理自己的邮件，端口是143</li>
</ul>
<h3 id="万维网www"><a class="markdownIt-Anchor" href="#万维网www"></a> 万维网WWW</h3>
<ul>
<li>统一资源定位符URL的组成：协议+主机+端口+路径</li>
</ul>
<h3 id="超文本传输协议http"><a class="markdownIt-Anchor" href="#超文本传输协议http"></a> 超文本传输协议HTTP</h3>
<ul>
<li>目的：定义了浏览器怎样向万维网服务器请求万维网文档以及万维网服务器怎样向浏览器传送稳定</li>
<li>在应用层</li>
<li>面向事务</li>
<li>使用TCP作为传输层协议</li>
<li>版本
<ul>
<li>HTTP/1.0
<ul>
<li>采用非持续连接：每次请求一个文件都要与服务器建立连接，收到响应后关闭连接</li>
<li>每请求一个文档就要有两倍的RTT开销</li>
</ul>
</li>
<li>HTTP/1.1
<ul>
<li>采用持续连接</li>
<li>可以使用流水线方式工作</li>
</ul>
</li>
</ul>
</li>
<li>面向文本：报文中每个字段都是一些ASCII码串，每个字段的长度不确定</li>
<li>Cookie是一种对无状态的HTTP进行状态化的技术（与Token一样）</li>
<li>HTTP请求报文格式
<ul>
<li>请求行：方法+URL+版本</li>
<li>首部行：首部字段名：值
<ul>
<li>Connection:Close代表非持续连接，请求完就释放连接</li>
<li>Connection:Keep-alive代表持续连接，请求完还可以继续发送</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>HTTP的连接方式</p>
<ul>
<li>非持续连接：每次都要建立一次TCP连接</li>
<li>持续连接：建立一次TCP连接即可
<ul>
<li>非流水线方式：每发送一个文件一个RTT（收到上一个文件的确认后才能发送下一个文件的请求）</li>
<li>流水线方式：理想情况下同时发送请求和响应，只需要一个RTT（发送请求和响应不受制约，可一次性发送所有的请求和响应）</li>
</ul>
</li>
</ul>
<p>万维网WWW使用TCP进行可靠传输</p>
<p>流水线方式结合TCP拥塞控制</p>
<ul>
<li>非流水线方式
<ul>
<li>客户每次必须收到上一个文件的响应后才能发送下一个文件的请求</li>
<li>服务器每次发送拥塞窗口个响应</li>
<li>客户每次收到完一个文件的响应后，发送下一个文件的请求和上一个文件的确认，然后服务器拥塞窗口倍增</li>
</ul>
</li>
<li>流水线方式
<ul>
<li>所有的请求一次性发送</li>
<li>服务器收到请求后，原本他也可以一次性发送所有的响应，但是因为TCP拥塞控制，他每次只能发送拥塞窗口个响应</li>
<li>客户每次收到一个响应后发送一个确认给服务器，然后服务器的拥塞窗口倍增，依次发送完所有响应</li>
</ul>
</li>
</ul>
<p>TCP/IP体系应用层典型协议在传输层中使用的相应协议</p>
<ul>
<li>TCP（面向连接，可靠）
<ul>
<li>SMTP 25</li>
<li>POP3</li>
<li>FTP 20/21</li>
<li>BGP 179</li>
<li>HTTP 80</li>
<li>HTTPS 443</li>
</ul>
</li>
<li>UDP（无连接，不可靠）
<ul>
<li>RIP 520</li>
<li>DNS 53</li>
<li>TFTP 69</li>
<li>SNMP 161</li>
<li>DHCP 67/68</li>
</ul>
</li>
<li>IP
<ul>
<li>IGMP</li>
<li>ICMP</li>
<li>OSPF</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/sum.jpg" alt="" /></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/content/jw_qh/p6.jpg" alt="" /></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://chaoblog.site">Chao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://chaoblog.site/2023/09/23/%E8%AE%A1%E7%BD%91%E5%BC%BA%E5%8C%96/">http://chaoblog.site/2023/09/23/%E8%AE%A1%E7%BD%91%E5%BC%BA%E5%8C%96/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://chaoblog.site" target="_blank">去他妈的生活</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/408/">408</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="/img/banner/net.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/23/%E8%AE%A1%E7%BB%84%E5%BC%BA%E5%8C%96/" title="计组强化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/banner/jz.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">计组强化</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/03/%E6%A6%82%E7%8E%87%E8%AE%BA%E5%BC%BA%E5%8C%96/" title="概率论强化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/banner/probability_theory.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">概率论强化</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/09/23/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%BC%BA%E5%8C%96/" title="操作系统强化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/banner/os.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-23</div><div class="title">操作系统强化</div></div></a></div><div><a href="/2023/09/23/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%BC%BA%E5%8C%96/" title="数据结构强化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/banner/code.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-23</div><div class="title">数据结构强化</div></div></a></div><div><a href="/2023/09/23/%E8%AE%A1%E7%BB%84%E5%BC%BA%E5%8C%96/" title="计组强化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/banner/jz.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-09-23</div><div class="title">计组强化</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Chao</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/God-Chao"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/God-Chao" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:chaoccc22@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://twitter.com/Chao_2222" target="_blank" title="Twitter"><i class="fab fa-twitter" style="color: #1C9EEF;"></i></a><a class="social-icon" href="https://www.instagram.com/chaoc_cc/" target="_blank" title="instagram"><i class="fab fa-instagram" style="color: #FF0B52;"></i></a><a class="social-icon" href="https://space.bilibili.com/628951889" target="_blank" title="bilibili"><i class="fab fa-bilibili" style="color: #00AEEC;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Life Sucks</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%BD%91%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text"> 计网体系结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text"> 物理层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text"> 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E9%80%80n%E5%B8%A7%E5%8D%8F%E8%AE%AEgbn"><span class="toc-number">3.1.</span> <span class="toc-text"> 后退N帧协议GBN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E4%B8%8E%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AEsr"><span class="toc-number">3.2.</span> <span class="toc-text"> 滑动窗口与选择重传协议SR</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csma%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.3.</span> <span class="toc-text"> CSMA协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8Bcsmacd%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.4.</span> <span class="toc-text"> 碰撞检测CSMA&#x2F;CD协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A2%B0%E6%92%9E%E9%81%BF%E5%85%8Dcsmaca%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.5.</span> <span class="toc-text"> 碰撞避免CSMA&#x2F;CA协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AE%E8%AF%A2%E8%AE%BF%E9%97%AE%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.6.</span> <span class="toc-text"> 轮询访问令牌传递协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%AF%B9%E7%82%B9ppp%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.7.</span> <span class="toc-text"> 点对点PPP协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text"> 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E5%8C%96nat%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.1.</span> <span class="toc-text"> 网络地址转化NAT协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEarp"><span class="toc-number">4.2.</span> <span class="toc-text"> 地址解析协议ARP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmp"><span class="toc-number">4.3.</span> <span class="toc-text"> 网络控制报文协议ICMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AErip"><span class="toc-number">4.4.</span> <span class="toc-text"> 路由信息协议RIP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88%E5%8D%8F%E8%AE%AEospf"><span class="toc-number">4.5.</span> <span class="toc-text"> 开放最短路径优先协议OSPF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AEbgp"><span class="toc-number">4.6.</span> <span class="toc-text"> 边界网关协议BGP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E7%BB%84%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AEigmp"><span class="toc-number">4.7.</span> <span class="toc-text"> 因特网组管理协议IGMP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text"> 传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#udp%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.1.</span> <span class="toc-text"> UDP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.2.</span> <span class="toc-text"> TCP协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text"> 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEdhcp"><span class="toc-number">6.1.</span> <span class="toc-text"> 动态主机配置协议DHCP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9Fdns"><span class="toc-number">6.2.</span> <span class="toc-text"> 域名系统DNS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEftp"><span class="toc-number">6.3.</span> <span class="toc-text"> 文件传输协议FTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E9%82%AE%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEsmtp"><span class="toc-number">6.4.</span> <span class="toc-text"> 简单邮件传输协议SMTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%82%AE%E5%B1%80%E5%8D%8F%E8%AE%AEpop3"><span class="toc-number">6.5.</span> <span class="toc-text"> 邮局协议POP3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%87%E7%BB%B4%E7%BD%91www"><span class="toc-number">6.6.</span> <span class="toc-text"> 万维网WWW</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEhttp"><span class="toc-number">6.7.</span> <span class="toc-text"> 超文本传输协议HTTP</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('/img/banner/net.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By Chao</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">今天你活着吗</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.12.0"></script><script src="/js/main.js?v=4.12.0"></script><script src="/js/tw_cn.js?v=4.12.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.32/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div></div></body></html>